<?xml version="1.0" encoding="iso-8859-1"?>
<!--
    Copyright (C) 2004 Orbeon, Inc.

    The Orbeon documentation is not distributed under the LGPL license. Use of the documentation is
    subject to the following terms:

    * Conversion to other formats is allowed, but the actual content may not be altered or edited
      in any way.

    * You may create printed copies for your own personal use.

    * For all other uses, such as selling printed copies or using (parts of) the manual in another
      publication, prior written agreement from Orbeon, Inc. is required.

    Please contact Orbeon at info@orbeon.com for more information.
-->
<document xmlns:p="http://www.orbeon.com/oxf/pipeline"
          xmlns:xforms="http://www.w3.org/2002/xforms"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <header>
        <title>Serializers</title>
    </header>
    <body>
        <section>
            <title>Introduction</title>
            <p>
                Serializers are processors with no XML output. A serializer, just like any
                processor, can access files, connect to databases, and take an action depending on
                its inputs.
            </p>
        </section>

        <anchor id="http-serializer"/>
        <section>
            <title>HTTP Serializer</title>
            <p>
                The HTTP serializer supports decoding binary or text data encapsulated in XML
                documents and sending it into an HTTP response. Typically, this means sending data
                back to a client web browser. This can be done in a Servlet environment or a Portlet
                environment.
             </p>
            <section>
                <title>Configuration</title>
                <p>
                    The configuration consists of the following optional elements.
                </p>
                <table ca="|l|p{0.3\textwidth}|p{0.2\textwidth}|">
                    <tr>
                        <th>Element Name</th>
                        <th>Type</th>
                        <th>Purpose</th>
                        <th>Default Value</th>
                    </tr>
                    <tr>
                        <td>status-code</td>
                        <td>valid HTTP status code</td>
                        <td>HTTP status code sent to the client</td>
                        <td>SC_OK (HTTP code 100)</td>
                    </tr>
                    <tr>
                        <td>error-code</td>
                        <td>valid HTTP error code</td>
                        <td>HTTP error code sent to the client</td>
                        <td><i>none</i></td>
                    </tr>
                    <tr>
                        <td>content-type</td>
                        <td>MIME content type, without any attributes</td>
                        <td>
                            Indicates the MIME type to send to the client (see decision algorithm below).
                        </td>
                        <td><code>application/octet-stream</code> for binary mode, <code>text/plain</code> for text mode</td>
                    </tr>
                    <tr>
                        <td>force-content-type</td>
                        <td>boolean</td>
                        <td>
                            Indicates whether the content type provided has precedence (see
                            decision algorithm below). This requires a
                            <code>content-type</code> element.
                        </td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>ignore-document-content-type</td>
                        <td>boolean</td>
                        <td>
                            Indicates whether the content type provided by the input
                            document should be ignored (see decision algorithm below).
                        </td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>encoding</td>
                        <td>valid encoding name</td>
                        <td>
                            Indicates the text encoding to send to the client (see decision
                            algorithm below).
                        </td>
                        <td>utf-8</td>
                    </tr>
                    <tr>
                        <td>force-encoding</td>
                        <td>boolean</td>
                        <td>
                            Indicates whether the encoding provided has precedence (see
                            decision algorithm below). This requires an
                            <code>encoding</code> element.
                        </td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>ignore-document-encoding</td>
                        <td>boolean</td>
                        <td>
                            Indicates whether the encoding provided by the input document
                            should be ignored (see decision algorithm below).
                        </td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>header</td>
                        <td></td>
                        <td>
                            Adds a custom HTTP header to the response. The nested elements
                            <code>name</code> and <code>value</code> contain the name and
                            value of the header, respectively. You can add multiple headers.
                        </td>
                        <td><i>none</i></td>
                    </tr>
                    <tr>
                        <td>cache-control/use-local-cache</td>
                        <td>boolean</td>
                        <td>
                            Whether the resulting stream must be locally cached. For
                            documents or binaries that are large or known to change at every
                            request, it is recommended to set this to false.
                        </td>
                        <td>true</td>
                    </tr>
                    <tr>
                        <td>empty-content</td>
                        <td>boolean</td>
                        <td>
                            Forces the serializer to return an empty content, without
                            reading its data input.
                        </td>
                        <td>false</td>
                    </tr>
                </table>
                <p>
                    Example:
                </p>
                <xml-source>
                    <config>
                        <content-type>image/jpeg</content-type>
                        <header>
                            <name>Content-Disposition</name>
                            <value>attachment; filename=image.jpg</value>
                        </header>
                    </config>
                </xml-source>
            </section>
            <section>
                <title>Content Type</title>
                <p>
                    The content type sent to the HTTP output is determined according to the
                    following priorities:
                </p>
                <ol>
                    <li>
                        Use the content type in the <code>content-type</code> element of the
                        configuration if <code>force-content-type</code> is set to
                        <code>true</code>.
                    </li>
                    <li>
                        Use the content type set in the input document with the
                        <code>content-type</code> attribute, if any, unless the
                        <code>ignore-document-content-type</code> element of the configuration
                        is set to <code>true</code>.
                    </li>
                    <li>
                        Use the content type in the <code>content-type</code> element of the
                        configuration, if specified.
                    </li>
                    <li>
                        Use <code>application/octet-stream</code> in binary mode, or
                        <code>text/plain</code> in text mode.
                    </li>
                </ol>
            </section>
            <section>
                <title>Binary Mode</title>
                <section>
                    <title>Input Document Format</title>
                    <p>
                        The binary mode is enabled when the root element of the input document
                        contains an <code>xsi:type</code> attribute containing a reference to the
                        <code>xs:base64Encoding</code> type.
                    </p>
                    <p>
                        In this mode, all the character content under the root element is considered
                        as Base64-encoded binary content. Extra elements, namespace declarations,
                        attributes, processing instructions, comments, are ignored, but they should
                        not be present: the input document should only have a root element
                        (necessary in every well-formed XML document) with attributes as required,
                        and containing only Base64-encoded character data. For example:
                    </p>
                    <xml-source>
<document xsi:type="xs:base64Binary" content-type="image/jpeg">
/9j/4AAQSkZJRgABAQEBygHKAAD/2wBDAAQDAwQDAwQEBAQFBQQFBwsHBwYGBw4KCggLEA4R
...
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//2Q==
</document>
                    </xml-source>
                    <p>
                        An optional <code>content-type</code> attribute provides information about
                        the content type of the document. This attribute may be used to set the HTTP
                        <code>content-type</code> header, as discussed above.
                    </p>
                </section>
                <section>
                    <title>Example</title>
                    <p>
                        Here is an example connecting the <a
                        href="processors-generators#url-generator">URL generator</a> to the
                        serializer, and the appropriate configurations:
                    </p>
                    <xml-source>
                        <p:processor name="oxf:url-generator">
                            <p:input name="config">
                                <config>
                                    <comment> URL of the image file </comment>
                                    <url>oxf:/my-image.jpg</url>
                                    <comment> Set content type </comment>
                                    <content-type>image/jpeg</content-type>
                                    <comment>
                                        This makes sure that the content type specified is used and
                                        that the file is read in binary mode, even if the connection
                                        sets another content type. With the oxf: protocol, this is
                                        not strictly necessary, but if the http: protocol was used,
                                        this could be used to override the content type set by the
                                        HTTP connection.
                                    </comment>
                                    <force-content-type>true</force-content-type>
                                </config>
                            </p:input>
                            <p:output name="data" id="image-data"/>
                        </p:processor>
                        <p:processor name="oxf:http-serializer">
                            <p:input name="config">
                                <config>
                                    <comment>
                                        This makes sure that the correct content type is sent to the
                                        client. In this particular case, this is not strictly
                                        necessary, as the content type provided by the input
                                        document would be used anyway.
                                    </comment>
                                    <content-type>image/jpeg</content-type>
                                    <force-content-type>true</force-content-type>
                                </config>
                            </p:input>
                            <p:input name="data" href="#image-data"/>
                        </p:processor>
                    </xml-source>
                </section>
            </section>
            <section>
                <title>Text Mode</title>
                <section>
                    <title>Input Document Format</title>
                    <p>
                        The text mode is enabled when the root element of the input document
                        contains an <code>xsi:type</code> attribute containing a reference to the
                        <code>xs:string</code> type.
                    </p>
                    <p>
                        In this mode, all the character content under the root element is considered
                        as text content. Extra elements, namespace declarations, attributes,
                        processing instructions, comments, are ignored, but they should not be
                        present: the input document should only have a root element (necessary in
                        every well-formed XML document) with attributes as required, and containing
                        only character data. For example:
                    </p>
                    <xml-source>
<document xsi:type="xs:string" content-type="text/plain">
    Rien n'est beau comme ces maisons du siècle dix-septième dont la place Royale offre une si
    majestueuse réunion. Quand leurs faces de briques, entremêlées et encadrées de cordons et de
    coins de pierre, et quand leurs fenêtres hautes sont enflammées des rayons splendides du
    couchant, vous vous sentez, à les voir, la même vénération que devant une Cour des parlements
    assemblée en robes rouges à revers d'hermine ; et, si ce n'était un puéril rapprochement, on
    pourrait dire que la longue table verte où ces redoutables magistrats sont rangés en carré
    figure un peu ce bandeau de tilleuls qui borde les quatre faces de la place Royale et en
    complète la grave harmonie.
</document>
                    </xml-source>
                    <p>
                        An optional <code>content-type</code> attribute provides information about
                        the content type of the document. This attribute may be used to set the HTTP
                        <code>content-type</code> header, as discussed above. In text mode, the
                        <code>content-type</code> attribute can also have a <code>charset</code>
                        parameter providing a hint at the preferred character encoding for the text,
                        as discussed below, for example <code>text/plain; charset=iso-8859-1</code>.
                        Note that the XML input document infoset internally represents characters
                        in Unicode and therefore does not require encoding information.
                    </p>
                </section>
                <section>
                    <title>Character Encoding</title>
                    <p>
                        The character encoding sent to the HTTP output is determined according to
                        the following priorities:
                    </p>
                    <ol>
                        <li>
                            Use the encoding in the <code>encoding</code> element of the
                            configuration if <code>force-encoding</code> is set to
                            <code>true</code>.
                        </li>
                        <li>
                            Use the encoding set in the input document with the
                            <code>content-type</code> attribute, if any, unless the
                            <code>ignore-document-encoding</code> element of the configuration is
                            set to <code>true</code>.
                        </li>
                        <li>
                            Use the encoding in the <code>encoding</code> element of the
                            configuration, if specified.
                        </li>
                        <li>
                            Use <code>utf-8</code>.
                        </li>
                    </ol>
                </section>
                <section>
                    <title>Example</title>
                    <p>
                        Here is an example connecting the <a
                        href="processors-generators#url-generator">URL generator</a> to the
                        serializer, and the appropriate configurations:
                    </p>
                    <xml-source>
                        <p:processor name="oxf:url-generator">
                            <p:input name="config">
                                <config>
                                    <comment> URL of the text file </comment>
                                    <url>oxf:/text.txt</url>
                                    <comment> The file will be read as plain text </comment>
                                    <content-type>text/plain</content-type>
                                    <comment> The file is encoded with this encoding </comment>
                                    <encoding>iso-8859-1</encoding>
                                </config>
                            </p:input>
                            <p:output name="data" id="text-data"/>
                        </p:processor>
                        <p:processor name="oxf:http-serializer">
                            <p:input name="config">
                                <config>
                                    <comment> Make sure the client receives the text/plain content type </comment>
                                    <content-type>text-plain</content-type>
                                    <force-content-type>true</force-content-type>
                                    <comment> We specify another encoding, and force it </comment>
                                    <encoding>utf-8</encoding>
                                    <force-encoding>true</force-encoding>
                                </config>
                            </p:input>
                            <p:input name="data" href="#text-data"/>
                        </p:processor>
                    </xml-source>
                </section>
            </section>
            <note>
                The HTTP serializer performs streaming. If its input data consists of a stream of
                short character SAX events, such as those produced by the <a
                href="processors-generators#request-generator">Request generator</a> the <a
                href="processors-generators#url-generator">URL generator</a>, the <a
                href="processors-sql#binary-data">SQL processor</a>, or converter processors, it is
                possible to serialize an "infinitely" long document.
            </note>
            <note>
                When using the command-line mode, instead of sending the output through HTTP, the
                HTTP serializer sends its output to the standard console output. In such a case,
                the parameters that do not affect the content of the data, such as content-type,
                status-code, etc. are ignored.
            </note>
        </section>

        <anchor id="http-serializers"/>
        <section>
            <title>HTTP Serializers</title>
            <p>
                These serializers share a common functionality: writing their data input to an HTTP
                response. Typically, this means sending data back to a client web browser. This can
                be done in a Servlet environment or a Portlet environment. All share the same
                configuration, but differ in how they convert their input data. The following
                describes the common configuration, then the specifics for each serializer.
            </p>
            <note>
                When using the command-line mode, instead of sending the output through HTTP, the
                HTTP serializers send their output to the standard output. In such a case, the
                parameters that do not affect the content of the data, such as content-type,
                status-code, etc. are ignored.
            </note>
            <p>
                All serializers send the cache control HTTP headers, including
                <code>Last-Modified</code>, <code>Expires</code> and <code>Cache-Control</code>.
                The MIME content type and content length headers are also supported.
            </p>

            <anchor id="http-configuration"/>
            <section>
                <title>Configuration</title>
                <p>
                    The configuration consists of the following optional elements.
                </p>
                <table ca="|l|p{0.3\textwidth}|p{0.2\textwidth}|">
                    <tr>
                        <th>Element</th>
                        <th>Purpose</th>
                        <th>Default</th>
                    </tr>
                    <tr>
                        <td>content-type</td>
                        <td>MIME type sent to the client</td>
                        <td>Specific to each serializer</td>
                    </tr>
                    <tr>
                        <td>status-code</td>
                        <td>HTTP status code sent to the client</td>
                        <td>SC_OK, or 100</td>
                    </tr>
                    <tr>
                        <td>empty-content</td>
                        <td>Forces the serializer to return an empty content, without reading its data input</td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>error-code</td>
                        <td>HTTP error code sent to the client</td>
                        <td>none</td>
                    </tr>
                    <tr>
                        <td>method</td>
                        <td>XSLT Output Method</td>
                        <td>html, xml or text, depending on the serializer</td>
                    </tr>
                    <tr>
                        <td>version</td>
                        <td>HTML or XML version number</td>
                        <td>4.01 for HTML (ignored for XML, which always output 1.0)</td>
                    </tr>
                    <tr>
                        <td>public-doctype</td>
                        <td>The public doctype</td>
                        <td>&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; for HTML, none otherwise</td>
                    </tr>
                    <tr>
                        <td>system-doctype</td>
                        <td>The system doctype</td>
                        <td>&quot;http://www.w3.org/TR/html4/loose.dtd&quot; for HTML, none otherwise</td>
                    </tr>
                    <tr>
                        <td>omit-xml-declaration</td>
                        <td>Specifies whether an XML declaration must be omitted</td>
                        <td>false for XML and HTML (i.e. a declaration is output by default), ignored otherwise</td>
                    </tr>
                    <tr>
                        <td>standalone</td>
                        <td>Specifies whether a standalone document declaration is output</td>
                        <td>false for XML, ignored otherwise</td>
                    </tr>
                    <tr>
                        <td>encoding</td>
                        <td>The default text encoding</td>
                        <td>iso-8859-1</td>
                    </tr>
                    <tr>
                        <td>indent</td>
                        <td>Specifies if the output is indented</td>
                        <td>true</td>
                    </tr>
                    <tr>
                        <td>indent-amount</td>
                        <td>Specifies the number of indentation space</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>cache-control/use-local-cache</td>
                        <td>
                            Whether the resulting stream must be locally cached. For documents
                            or binaries that are large or known to change at every request, it
                            is recommended to set this to false.
                        </td>
                        <td>true</td>
                    </tr>
                    <tr>
                        <td>header</td>
                        <td>
                            Adds a custom HTTP header to the response. The nested elements
                            <code>name</code> and <code>value</code> contain the name and value
                            of the header, respectively. You can add multiple headers.
                        </td>
                        <td>none</td>
                    </tr>
                </table>
                <xml-source>
                    <config>
                        <content-type>text/html</content-type>
                        <status-code>100</status-code>
                        <empty-content>false</empty-content>
                        <error-code>0</error-code>
                        <version>4.01</version>
                        <public-doctype>-//W3C//DTD HTML 4.01//EN</public-doctype>
                        <system-doctype>http://www.w3.org/TR/html4/strict.dtd</system-doctype>
                        <omit-xml-declaration>false</omit-xml-declaration>
                        <standalone>false</standalone>
                        <encoding>utf-8</encoding>
                        <indent-amount>4</indent-amount>
                        <cache-control>
                            <use-local-cache>true</use-local-cache>
                        </cache-control>
                        <header>
                            <name>Content-Disposition</name>
                            <value>attachment; filename=image.jpeg;</value>
                        </header>
                    </config>
                </xml-source>
            </section>

            <anchor id="XMLSerializer"/>
            <section>
                <title>XML Serializer</title>
                <p>
                    This serializer writes XML text. The output is indented
                    with no spaces and encoded using the ISO-8859-1 character
                    set. The default MIME content type is
                    <code>text/xml</code>.
                </p>

                <xml-source>
                    <p:processor name="oxf:xml-serializer">
                        <p:input name="config">
                            <config>
                                <content-type>text/vnd.wap.wml</content-type>
                            </config>
                        </p:input>
                        <p:input name="data" href="#wml"/>
                    </p:processor>
                </xml-source>
            </section>

            <anchor id="html-serializer"/>
            <section>
                <title>HTML Serializer</title>
                <p>
                    The HTML Serializer's output conforms to the XSLT <code>html</code> semantic.
                    The <code>doctype</code> is set to <link
                    href="http://www.w3.org/TR/1998/REC-html40-19980424/sgml/loosedtd.html">HTML
                    4.0 Transitional</link> and the content is indented with no space and encoded
                    using the ISO-8859-1 character set. The default MIME content type is
                    <code>text/html</code>. The following is a simple HTMLSerializer example:
                </p>

                <xml-source>
                    <p:processor name="oxf:html-serializer">
                        <p:input name="config">
                            <config/>
                        </p:input>
                        <p:input name="data" href="#html"/>
                    </p:processor>
                </xml-source>
                <note>
                    The <link href="http://www.w3.org/TR/2000/REC-xml-20001006">XML 1.0
                    Specification</link> prohibits a DOCTYPE definition with a Public ID and no
                    System ID.
                </note>

            </section>
            <section>
                <title>Text Serializer</title>

                <p>
                    The Text Serializer's output conforms to the XSLT <code>text</code> semantic.
                    The output is encoded using the ISO-8859-1 character set. This serializer is
                    typically useful for pipelines generating Comma Separated Value (CSV) files.
                    The default MIME content type is <code>text/plain</code>.
                </p>

                <xml-source>
                    <p:processor name="oxf:text-serializer">
                        <p:input name="config">
                            <config/>
                        </p:input>
                        <p:input name="data" href="#text"/>
                    </p:processor>
                </xml-source>

            </section>

            <anchor id="fop"/>
            <section>
                <title>PDF Serializer</title>
                <p>
                    The PDF Serializer produces PDF documents from an <link
                    href="http://www.w3.org/TR/xsl/">XSL-FO</link> description of the page. The
                    default MIME content type is <code>application/pdf</code>.
                </p>
                <note>
                    The input document of the FOPSerializer must follow the <fork
                    href="http://www.w3.org/TR/2001/REC-xsl-20011015/#">W3C XSL/FO
                    Recommendation</fork>.
                </note>
                <p>
                    The <link href="http://www.faqs.org/rfcs/rfc2183.html">RFC 2183</link>
                    describes the <code>Content-Disposition</code> HTTP header, used by the browser
                    to decide how to display an attachement. A value of <code>inline</code> means
                    that the browser will try to use a plugin to display the PDF file. A value of
                    <code>attachement</code> causes the browser to ask the user to save the file,
                    optionnaly proposing a file name. The following two example show how this
                    feature is used with the FOP Serializer.
                </p>
                <p>Using the PDF plugin:</p>
                <xml-source>
                    <p:processor name="oxf:xslfo-serializer">
                        <p:input name="config">
                            <config>
                                <header>
                                    <name>Content-Disposition</name>
                                    <value>inline</value>
                                </header>
                            </config>
                        </p:input>
                        <p:input name="data" href="#xslfo"/>
                    </p:processor>
                </xml-source>
                <p>Saving the PDF file to disk:</p>
                <xml-source>
                    <p:processor name="oxf:xslfo-serializer">
                        <p:input name="config">
                            <config>
                                <header>
                                    <name>Content-Disposition</name>
                                    <value>attachement; filename=report.pdf</value>
                                </header>
                            </config>
                        </p:input>
                        <p:input name="data" href="#xslfo"/>
                    </p:processor>
                </xml-source>
            </section>
        </section>

        <anchor id="url-serializer"/>
        <section>
            <title>URL Serializer</title>
            <p>
                The URL Serializer mirrors the functionality of the <link
                href="processors-generators#url-generator">URL Generator</link>. Instead of reading
                from of URL, it writes its <code>data</code> input as XML in a URL. Note that only
                the <code>oxf:</code> and <code>http:</code> protocols allows writing at this time.

            </p>
            <note>
                The <link href="reference-resource-managers#flatfile">Flat File</link> Resource
                Manager is the only Resource Manager supporting write operations.
            </note>
            <p>
                The URL serializer takes a <code>config</code> input with a single <code>url</code>
                element containing the URL to write to. The <code>data</code> input is serialized
                according the rules of the XML Serializer.
            </p>
            <xml-source>
                <p:processor name="oxf:url-serializer" xmlns:p="http://www.orbeon.com/oxf/pipeline">
                    <p:input name="config">
                        <config>
                            <url>oxf:/path/current.xml</url>
                        </config>
                    </p:input>
                    <p:input name="data" href="#xml-data"/>
                </p:processor>
            </xml-source>
        </section>

        <section>
            <title>File Serializer</title>
            <p>
                The File Serializer is most useful in a <link
                href="integration-command-line">command-line application</link>. When executed, this
                serializer writes its data input into the file specified in the <code>config</code>
                element. Here is an example:
            </p>
            <xml-source>
                <p:processor name="oxf:file-serializer">
                    <p:input name="config">
                        <config>
                            <file>test.html</file>
                            <directory>c:/build/doc</directory>
                            <content-type>text/html</content-type>
                            <public-doctype>-//W3C//DTD HTML 4.01//EN</public-doctype>
                            <system-doctype>http://www.w3.org/TR/html4/strict.dtd</system-doctype>
                            <encoding>utf-8</encoding>
                            <indent-amount>4</indent-amount>
                        </config>
                    </p:input>
                    <p:input name="data" href="#html"/>
                </p:processor>
            </xml-source>
            <p>
                The <code>file</code> element specifies the file to write to.
            </p>
            <p>
                The <code>directory</code> element is optional. If specified, it is used as a base
                directory for the <code>file</code> element.
            </p>
            <p>
                The <code>content-type</code> element is optional. The default is
                <code>text/xml</code>. Other valid values are <code>text/html</code> and
                <code>text/plain</code>.
            </p>
            <p>
                The following optional attributes can also be specified:
                <code>public-doctype</code>, <code>system-doctype</code>, <code>encoding</code>,
                <code>indent</code> and <code>indent-amount</code>.
            </p>
        </section>
        <anchor id="scope-serializer"/>
        <section>
            <title>Scope Serializer</title>
            <p>
                The Scope serializer can store documents into the application, session and request
                scopes. It works together with the <a
                href="processors-generators#scope-generator">Scope generator</a>.
            </p>
            <p>
                The Scope serializer has a <code>config</code> input in the following format:
            </p>
            <xml-source>
                <config>
                    <key>cart</key>
                    <scope>application|session|request</scope>
                </config>
            </xml-source>
            <table>
                <tr>
                    <th>key</th>
                    <td>
                        The <code>&lt;key></code> element contains a string used to identify
                        the document. The same key must be used to store and retrieve a
                        document.
                    </td>
                </tr>
                <tr>
                    <th>scope</th>
                    <td>
                        The <code>&lt;scope></code> element specifies in what scope the document is
                        to be stored. The available scopes are:

                        <ul>
                            <li>
                                <b>application</b> - The application scope starts when the Web
                                application is deployed. It ends when the Web application is
                                undeployed. The application scope provides an efficient storage for
                                data that does not need to be persisted and that is common for all
                                users. It is typically used to cache information (e.g. configuration
                                data for the application read from a database).
                            </li>
                            <li>
                                <b>session</b> - The session scope is attached to a given user of
                                the Web application. It is typically used to store information that
                                does not need to be persisted and is specific to a given user. It is
                                typically used to cache the user's profile.
                            </li>
                            <li>
                                <b>request</b> - The request scope starts when an HTTP request is
                                sent to the server. It ends when the corresponding HTTP response is
                                sent back to the client. The request scope can be used to integrate
                                a Presentation Server application with legacy J2EE servlets.
                            </li>
                        </ul>
                    </td>
                </tr>
            </table>
            <p>
                In addition to the <code>config</code> input, the Scope serializer has a
                <code>data</code> input receiving the document to store.
            </p>
            <note>
                The Session serializer, previously used, is now deprecated. Use the Scope
                serializer with session scope instead.
            </note>
        </section>
        <section>
            <title>Null Serializer</title>
            <p>
                The Null Serializer acts as a black hole. The <code>data</code> input is read and
                ignored. This processor is useful when a pipeline or a branch of a
                <code>p:choose</code> element doesn't have to return any document.
            </p>
            <xml-source>
                <p:processor name="oxf:null-serializer">
                    <p:input name="data" href="#document"/>
                </p:processor>
            </xml-source>
        </section>

        <section>
            <title>Flushing the Output Stream</title>
            <p>
                All serializers (XML, HTML, text, and FOP) will flush their output stream when they
                encounter the following processing instruction: <code>&lt;?oxf-serializer
                flush?&gt;</code> <p/> This instruction allows the browser to display a Web page
                incrementally. Incremental display is typically useful when sending large tables or
                when the first part of a Web page could be displayed, while the rest of the page
                cannot until a time consuming action is performed.
            </p>
        </section>
    </body>
</document>
