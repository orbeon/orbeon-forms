// Copyright (C) 2014 Orbeon, Inc.
//
// This program is free software; you can redistribute it and/or modify it under the terms of the
// GNU Lesser General Public License as published by the Free Software Foundation; either version
// 2.1 of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
// without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
// See the GNU Lesser General Public License for more details.
//
// The full text of the license is available at http://www.gnu.org/copyleft/lesser.html

@import (reference)  "../../../apps/fr/style/form-runner-common";

.orbeon .xbl-fr-error-summary {

    clear: both;
    width: 100%;
    padding: 0;
    margin-top: 4px; // margin needed so that error for reCAPTCHA doesn't touch

    .fr-error-summary-body {
        display: block;
        padding: 0;
    }

    .fr-error-title {
        display: block;
        margin: 0;
        box-sizing: border-box;
        width: 100%;
        padding: 5px 10px;
        color: var(--orbeon-error-summary-title-color);
        border-bottom: 1px solid var(--orbeon-error-summary-title-bottom-border-color);
        border-radius: @baseBorderRadius;
        &.xforms-label {
            font-weight: inherit;
        }
    }

    .fr-show-more-errors {
        margin-right: 10px;
    }

    // Multiple levels can be mixed so make sure the strongest wins
    .fr-level-info    > .fr-error-title { background-color: var(--orbeon-info-color); }
    .fr-level-warning > .fr-error-title { background-color: var(--orbeon-warning-color); }
    .fr-level-error   > .fr-error-title { background-color: var(--orbeon-error-color); }

    .fr-error-group {

        margin: 5px 0;

        .xforms-mediatype-text-html, .xforms-mediatype-text-html .xforms-output-output {
            display: inline;
        }

        &> li {
            border: 2px solid;
            border-radius: @baseBorderRadius;
            padding: 10px;
            margin-bottom: 5px;
            list-style: none; // Don't show list number, instead we output it in the label, otherwise the button with
                              // the label shows below the number with long error messages.
            background-color: var(--orbeon-error-summary-item-background-color);

            // Multiple levels can be mixed so make sure the strongest wins
            &.fr-level-info    { border-color: var(--orbeon-info-color); }
            &.fr-level-warning { border-color: var(--orbeon-warning-color); }
            &.fr-level-error   { border-color: var(--orbeon-error-color); }
        }

        .fr-error-link {
            display: inline;
        }

        .btn-link {
            text-decoration: none;
            white-space: normal;    // prevent wrapping, see https://github.com/orbeon/orbeon-forms/issues/5681
            border: none;           // to align with list number
            vertical-align: bottom; // to align with list number
            padding: 0;             // to align with list number
            margin: 0;              // probably unneeded
            appearance: none;       // probably unneeded
            display: inline;        // probably unneeded
        }

        .fr-error-number, .fr-error-label, .fr-error-alert {
            text-decoration: underline;
        }

        .fr-error-label:not(:empty):after {
            content: ": "
        }

        .fr-error-label, .fr-error-alert {
            // The error summary produces a div, instead of a span, so block elements it contains are not moved in
            // the DOM, but, if possible, we still want the message to be shown on the same line as the control label.
            display: inline;
            vertical-align: middle;

            ul {
                list-style-type: square;
                margin-bottom: 0;
            }
        }

        // Make label and alert both the same color
        .fr-level-info {
            .fr-error-number, .fr-error-label, .fr-error-alert {
                color: var(--orbeon-info-color);
            }
        }
        .fr-level-warning {
            .fr-error-number, .fr-error-label, .fr-error-alert {
                color: var(--orbeon-warning-color);
            }
        }
        .fr-level-error {
            .fr-error-number, .fr-error-label, .fr-error-alert {
                color: var(--orbeon-error-color);
            }
        }
    }
}
