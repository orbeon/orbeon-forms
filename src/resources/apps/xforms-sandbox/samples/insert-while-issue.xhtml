<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xh="http://www.w3.org/1999/xhtml"
    xmlns:xf="http://www.w3.org/2002/xforms" xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
    xmlns:xdt="http://www.w3.org/2005/xpath-datatypes" xmlns:exf="http://www.exforms.org/exf/1-0"
    xmlns:fr="http://orbeon.org/oxf/xml/form-runner" xmlns:f="http://orbeon.org/oxf/xml/formatting">
    <head>
        <title>xf:insert/@while issue</title>
        <xf:model>
            <!-- form instance -->
            <xf:instance id="main-instance" xmlns="">
                <instance>
                    <record>
                        <id>1</id>
                    </record>
                    <record>
                        <id>2</id>
                    </record>
                </instance>
            </xf:instance>

            <xf:action ev:event="xforms-ready">
                <xf:insert context="record[not(foo)]" origin="xxf:element('foo', 'N/A')"
                    while="/instance/record[not(foo)]"/>
            </xf:action>

        </xf:model>
    </head>
    <body>
        <xf:value ref="record[2]/foo">
            <xf:label>That's working!</xf:label>
        </xf:value>
        <br/>
        <fr:xforms-inspector xmlns:fr="http://orbeon.org/oxf/xml/form-runner"/>
    </body>
</html>
